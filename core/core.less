
/*
========================================================================================================================================================================
==                                   ===================================================================================================================================
==                                   ===================================================================================================================================
==             FRONTSIZE             ===================================================================================================================================
==                                   ===================================================================================================================================
==                                   ===================================================================================================================================
========================================================================================================================================================================

Frontsize - http://frontsize.com
License:	MIT Licence
Version:	1.0
Date:		2014-01-01
Author:		Vittorio Vittori
Website:	http://vittoriovittori.com
*/

/*
========================================================================================================================================================================
==                                   ===================================================================================================================================
==             RESPONSIVE            ===================================================================================================================================
==                VARS               ===================================================================================================================================
==                                   ===================================================================================================================================
========================================================================================================================================================================
*/

@to-hd-full-step:              (@hd-full-step - 1px);
@to-hd-ready-step:             (@hd-ready-step - 1px);
@to-tablet-landscape-step:     (@tablet-landscape-step - 1px);
@to-tablet-portrait-step:      (@tablet-portrait-step - 1px);
@to-smartphone-landscape-step: (@smartphone-landscape-step - 1px);
@to-smartphone-portrait-step:  (@smartphone-portrait-step - 1px);

/*
========================================================================================================================================================================
==                                   ===================================================================================================================================
==               GLOBAL              ===================================================================================================================================
==             RESPONSIVE            ===================================================================================================================================
==           VIEWPORTS VARS          ===================================================================================================================================
==                                   ===================================================================================================================================
========================================================================================================================================================================
*/

@only-smartphone-portrait:         ~"only screen and (min-width: 1px) and (max-width : @{to-smartphone-landscape-step})";
@only-smartphone-landscape:        ~"only screen and (min-width: @{smartphone-landscape-step}) and (max-width : @{to-tablet-portrait-step})";
@only-tablet-portrait:             ~"only screen and (min-width: @{tablet-portrait-step}) and (max-width : @{to-tablet-landscape-step}), only print";
@only-tablet-landscape:            ~"only screen and (min-width: @{tablet-landscape-step}) and (max-width : @{to-hd-ready-step})";
@only-hd-ready:                    ~"only screen and (min-width: @{hd-ready-step}) and (max-width : @{to-hd-full-step})";
@only-hd-full:                     ~"only screen and (min-width: @{hd-full-step})";

@from-smartphone-portrait:         ~"only screen and (min-width: 1px)";
@from-smartphone-landscape:        ~"only screen and (min-width: @{smartphone-landscape-step})";
@from-tablet-portrait:             ~"only screen and (min-width: @{tablet-portrait-step}), only print";
@from-tablet-landscape:            ~"only screen and (min-width: @{tablet-landscape-step})";
@from-hd-ready:                    ~"only screen and (min-width: @{hd-ready-step})";
@from-hd-full:                     @only-hd-full;

@till-smartphone-portrait:         ~"only screen and (max-width: @{to-smartphone-portrait-step})"; // useless!
@till-smartphone-landscape:        ~"only screen and (max-width: @{to-smartphone-landscape-step})";
@till-tablet-portrait:             ~"only screen and (max-width: @{to-tablet-portrait-step})";
@till-tablet-landscape:            ~"only screen and (max-width: @{to-tablet-landscape-step}), only print";
@till-hd-ready:                    ~"only screen and (max-width: @{to-hd-ready-step})";
@till-hd-full:                     ~"only screen and (max-width: @{to-hd-full-step})";

@retina-from-smartphone-portrait:  ~"@{from-smartphone-portrait},	@{display-retina-standard-only}"; // this woking only with @display-retina-standard-only
@retina-from-smartphone-landscape: ~"@{from-smartphone-landscape},	@{display-retina-standard-only}"; // this woking only with @display-retina-standard-only
@retina-from-tablet-portrait:      ~"@{from-tablet-portrait},		@{display-retina-standard-only}"; // this woking only with @display-retina-standard-only
@retina-from-tablet-landscape:     ~"@{from-tablet-landscape},		@{display-retina-standard-only}"; // this woking only with @display-retina-standard-only
@retina-from-hd-ready:             ~"@{from-hd-ready},				@{display-retina-standard-only}"; // this woking only with @display-retina-standard-only
@retina-from-hd-full:              ~"@{from-hd-full},				@{display-retina-standard-only}"; // this woking only with @display-retina-standard-only

@display-retina-standard-only:     ~"only screen and (min-device-pixel-ratio: 2)";
@display-retina:                   ~"only screen and (-webkit-min-device-pixel-ratio: 2) and (aspect-ratio: 2), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 2dppx)";
@display-standard:                 ~"only screen and (-webkit-max-device-pixel-ratio: 1) and (aspect-ratio: 1), only screen and (-webkit-max-device-pixel-ratio: 1), only screen and (max--moz-device-pixel-ratio: 1), only screen and (-o-max-device-pixel-ratio: 1/11), only screen and (max-device-pixel-ratio: 1), only screen and (max-resolution: 1dppx)";

@print-viewport: @only-tablet-portrait;

/*
========================================================================================================================================================================
==                                   ===================================================================================================================================
==             FRONTSIZE             ===================================================================================================================================
==             INTERNAL              ===================================================================================================================================
==              MIXINS               ===================================================================================================================================
==                                   ===================================================================================================================================
========================================================================================================================================================================
*/

.addColumnSet(@prefix:col, @totalSteps:12) {
	@startIndex: @totalSteps;
	.loopColumnSet(@totalSteps, @prefix, @startIndex);
}

.applyFillToColumnSet(@prefix, @totalSteps, @fillViewport:"smartphone-landscape") {
	.loopColumnSetFill(@prefix, @totalSteps, @fillViewport, @index:@totalSteps);
}

.loopColumnSet (@total, @prefix, @index, @prevRule:~"") when (@index = @total) {
	@nextRule:~".@{prefix}-@{index}-of-@{total}";
	.loopColumnSet(@total, @prefix, @index - 1, @nextRule);
}.loopColumnSet (@total, @prefix, @index, @prevRule:~"") when (@index > 0) and (@index < @total) {
	@nextRule:~"@{prevRule}, .@{prefix}-@{index}-of-@{total}";
	.loopColumnSet(@total, @prefix, @index - 1, @nextRule);
}.loopColumnSet (@total, @prefix, @index, @prevRule:~"") when (@index > 0) {
	.@{prefix}-@{index}-of-@{total} {
		.setColumnStep(@index, @total);
	}
}.loopColumnSet (@total, @prefix, @index, @prevRule:~"") when (@index = 0) {
	@{prevRule} {
		.setColumnBehavior();
	}
}

.loopColumnSetFill(@prefix, @total, @fill, @index) when (@fill = "tablet-landscape") and (@index > 0) {
	@media @till-hd-ready {
		// Tablet landscape
		.@{prefix}-@{index}-of-@{total} {
			width: 100%;
		}
	}
	.loopColumnSetFill(@prefix, @total, @fill, @index - 1);
}.loopColumnSetFill(@prefix, @total, @fill, @index) when (@fill = "tablet-portrait") and (@index > 0) {
	@media @till-tablet-landscape {
		// Tablet portrait
		.@{prefix}-@{index}-of-@{total} {
			width: 100%;
		}
	}
	.loopColumnSetFill(@prefix, @total, @fill, @index - 1);
}.loopColumnSetFill(@prefix, @total, @fill, @index) when (@fill = "smartphone-landscape") and (@index > 0) {
	@media @till-tablet-portrait {
		// Smartphone landscape
		.@{prefix}-@{index}-of-@{total} {
			width: 100%;
		}
	}
	.loopColumnSetFill(@prefix, @total, @fill, @index - 1);
}.loopColumnSetFill(@prefix, @total, @fill, @index) when (@fill = "smartphone-portrait") and (@index > 0) {
	@media @till-smartphone-landscape {
		// Smartphone portrait
		.@{prefix}-@{index}-of-@{total} {
			width: 100%;
		}
	}
	.loopColumnSetFill(@prefix, @total, @fill, @index - 1);
}

.setColumns(@columns) {
	width:(100%/@columns);
	//&:nth-child(1n+1)  { clear:none; }
	//&:nth-child(2n+1)  { clear:none; }
	//&:nth-child(3n+1)  { clear:none; }
	//&:nth-child(4n+1)  { clear:none; }
	//&:nth-child(5n+1)  { clear:none; }
	//&:nth-child(6n+1)  { clear:none; }
	//&:nth-child(7n+1)  { clear:none; }
	//&:nth-child(8n+1)  { clear:none; }
	//&:nth-child(10n+1) { clear:none; }
	//&:nth-child(12n+1) { clear:none; }
	//&:nth-child(16n+1) { clear:none; }
	&:nth-child(@{columns}n+1) {clear:both;}
}

.setColumnStep(@step, @columns) {
	width:((100% * @step)/@columns);
}

.setColumnBehavior(@usePosition:true) {
	padding-left:@horizontal-padding;
	padding-right:@horizontal-padding;
	float: left;
	.wrap;
}.setColumnBehavior(@usePosition:true) when (@usePosition = true) {
	position: relative;
}
