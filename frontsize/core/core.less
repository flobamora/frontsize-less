
/*
========================================================================================================================================================================
==                                   ===================================================================================================================================
==                                   ===================================================================================================================================
==             FRONTSIZE             ===================================================================================================================================
==                                   ===================================================================================================================================
==                                   ===================================================================================================================================
========================================================================================================================================================================

Frontsize - http://frontsize.com
License:	Apache License v2.0
Version:	1.1
Date:		2013-06-08
Author:		Vittorio Vittori
Website:	http://vittoriovittori.com
*/

/*
========================================================================================================================================================================
==                                   ===================================================================================================================================
==               GLOBAL              ===================================================================================================================================
==             RESPONSIVE            ===================================================================================================================================
==                VARS               ===================================================================================================================================
==                                   ===================================================================================================================================
========================================================================================================================================================================
*/

@to-hd-full-step:              (@hd-full-step - 1px);
@to-hd-ready-step:             (@hd-ready-step - 1px);
@to-tablet-landscape-step:     (@tablet-landscape-step - 1px);
@to-tablet-portrait-step:      (@tablet-portrait-step - 1px);
@to-smartphone-landscape-step: (@smartphone-landscape-step - 1px);
@to-smartphone-portrait-step:  (@smartphone-portrait-step - 1px);

@only-smartphone-portrait:  ~"only screen and (min-width : 1px) and (max-width : @{to-smartphone-landscape-step})";
@only-smartphone-landscape: ~"only screen and (min-width : @{smartphone-landscape-step}) and (max-width : @{to-tablet-portrait-step})";
@only-tablet-portrait:      ~"only screen and (min-width : @{tablet-portrait-step}) and (max-width : @{to-tablet-landscape-step}), only print";
@only-tablet-landscape:     ~"only screen and (min-width : @{tablet-landscape-step}) and (max-width : @{to-hd-ready-step})";
@only-hd-ready:             ~"only screen and (min-width : @{hd-ready-step}) and (max-width : @{to-hd-full-step})";
@only-hd-full:              ~"only screen and (min-width : @{hd-full-step})";

@from-smartphone-portrait:  ~"only screen and (min-width : 1px)";
@from-smartphone-landscape: ~"only screen and (min-width : @{smartphone-landscape-step})";
@from-tablet-portrait:      ~"only screen and (min-width : @{tablet-portrait-step}), only print";
@from-tablet-landscape:     ~"only screen and (min-width : @{tablet-landscape-step})";
@from-hd-ready:             ~"only screen and (min-width : @{hd-ready-step})";
@from-hd-full:              @only-hd-full;

@till-smartphone-portrait:  ~"only screen and (max-width : @{to-smartphone-portrait-step})"; // useless!
@till-smartphone-landscape: ~"only screen and (max-width : @{to-smartphone-landscape-step})";
@till-tablet-portrait:      ~"only screen and (max-width : @{to-tablet-portrait-step})";
@till-tablet-landscape:     ~"only screen and (max-width : @{to-tablet-landscape-step}), only print";
@till-hd-ready:             ~"only screen and (max-width : @{to-hd-ready-step})";
@till-hd-full:              ~"only screen and (max-width : @{to-hd-full-step})";

@display-retina:   ~"only screen and (-webkit-min-device-pixel-ratio: 2) and (aspect-ratio:2), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 2dppx)";
@display-standard: ~"only screen and (-webkit-max-device-pixel-ratio: 1) and (aspect-ratio:1), only screen and (-webkit-max-device-pixel-ratio: 1), only screen and (max--moz-device-pixel-ratio: 1), only screen and (-o-max-device-pixel-ratio: 1/11), only screen and (max-device-pixel-ratio: 1), only screen and (max-resolution: 1dppx)";



/*
========================================================================================================================================================================
==                                   ===================================================================================================================================
==             FRONTSIZE             ===================================================================================================================================
==             INTERNAL              ===================================================================================================================================
==              MIXINS               ===================================================================================================================================
==                                   ===================================================================================================================================
========================================================================================================================================================================
*/

.add-column-set (@name:col, @total:12, @fill:"smartphone-landscape", @index:@total) {
	.loop-column-set(@total, @name, @index);
	.loop-column-set-fill(@total, @fill, @index);
}

.loop-column-set (@total, @name, @index) when (@index > 0) {
	.@{name}-@{index}-of-@{total} {
		.set-column-step(@index, @total);
		.set-column-behavior();
	}
	.loop-column-set(@total, @name, @index - 1);
}

.loop-column-set-fill (@total, @fill, @index) when (@fill = "tablet-landscape") and (@index > 0) {
	@media @till-hd-ready {
		// Tablet landscape
		.@{name}-@{index}-of-@{total} {
			width: 100%;
		}
	}
	.loop-column-set-fill(@total, @fill, @index - 1);
}
.loop-column-set-fill (@total, @fill, @index) when (@fill = "tablet-portrait") and (@index > 0) {
	@media only print {
		// For print, behave as tablet portrait
		.@{name}-@{index}-of-@{total} {
			width: 100%;
		}
	}
	@media @till-tablet-landscape {
		// Tablet portrait
		.@{name}-@{index}-of-@{total} {
			width: 100%;
		}
	}
	.loop-column-set-fill(@total, @fill, @index - 1);
}
.loop-column-set-fill (@total, @fill, @index) when (@fill = "smartphone-landscape") and (@index > 0) {
	@media @till-tablet-portrait {
		// Smartphone landscape
		.@{name}-@{index}-of-@{total} {
			width: 100%;
		}
	}
	.loop-column-set-fill(@total, @fill, @index - 1);
}

.loop-column-set-fill (@total, @fill, @index) when (@fill = "smartphone-portrait") and (@index > 0) {
	@media @till-smartphone-landscape {
		// Smartphone portrait
		.@{name}-@{index}-of-@{total} {
			width: 100%;
		}
	}
	.loop-column-set-fill(@total, @fill, @index - 1);
}

.set-columns(@columns) {
	width:(100%/@columns);
	//&:nth-child(1n+1)  { clear:none; }
	//&:nth-child(2n+1)  { clear:none; }
	//&:nth-child(3n+1)  { clear:none; }
	//&:nth-child(4n+1)  { clear:none; }
	//&:nth-child(5n+1)  { clear:none; }
	//&:nth-child(6n+1)  { clear:none; }
	//&:nth-child(7n+1)  { clear:none; }
	//&:nth-child(8n+1)  { clear:none; }
	//&:nth-child(10n+1) { clear:none; }
	//&:nth-child(12n+1) { clear:none; }
	//&:nth-child(16n+1) { clear:none; }
	&:nth-child(@{columns}n+1) {clear:both;}
}

.set-column-step(@step, @columns) {
	width:((100% * @step)/@columns);
}

.set-column-behavior() {
	padding-left:@horizontal-padding;
	padding-right:@horizontal-padding;
	float: left;
	position: relative;
	.wrap;
}

// not working yet in LESS 1.4.1
.view(@view) {
	@import "views/@{view}";
}
.model(@filename) {
	@import 'models/@{filename}';
}
